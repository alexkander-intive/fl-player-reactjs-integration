/*! ******************************************************************************* 
   Package Name: fl-player-ui
   Generated: 2022-08-24
   Version: 7.0.55

   Copyright (C) Firstlight Media. All rights reserved.  
   
   All information contained herein is, and remains the property of Firstlight Media. 
   The intellectual and technical concepts contained herein are proprietary to 
   Firstlight Media.  

   Dissemination of this information or reproduction of this material is strictly 
   forbidden unless prior written permission is obtained from Firstlight Media.  
   ******************************************************************************* */
import{TrackType as e,PlayerContext as t}from"fl-player-interface";import{createLogger as a}from"fl-foundation";class i extends class{constructor(e){this.elemName=e.elemName,this.attr=e.attr,this.hasParent=e.hasParent,this.parentElemId=e.parentElemId||""}}{constructor(e,t){super(e),this.containerElement_=t}renderHtml(){const e=document.createElement(this.elemName);let t=this.containerElement_;const a=this.setElemAttr(e,this.attr);return this.hasParent?("videoContainer"!==this.parentElemId&&(t=document.getElementById(this.parentElemId)),t.appendChild(a),t):a}setElemAttr(e,t){return Object.keys(t).forEach((a=>{const i=t[a];e.setAttribute(a,i)})),e}}class n{constructor(e){this.videoWrapper_=e}flUiBuilder(e){return e.forEach((e=>{this.controlElement=new i(e,this.videoWrapper_).renderHtml()})),this.controlElement}}const r=[{elemName:"div",attr:{id:"flp-player-cover",class:"fl-player-cover"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"div",attr:{id:"flp-video-controls",class:"fl-player-controls fl-player-controls--show"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"button",attr:{id:"flp-upnxt-btn",class:"upnxt-btn upnxt-btn--hide  "},hasParent:!0,parentElemId:"videoContainer"},{elemName:"span",attr:{id:"flp-upnxt-icon",class:"btn--nexticon"},hasParent:!0,parentElemId:"flp-upnxt-btn"},{elemName:"span",attr:{id:"flp-upnxt-text",class:"btn"},hasParent:!0,parentElemId:"flp-upnxt-btn"},{elemName:"span",attr:{class:"fl-upnxt-progress"},hasParent:!0,parentElemId:"flp-upnxt-btn"},{elemName:"div",attr:{id:"flp-cbar-bottom",class:"fl-cbar-bottom"},hasParent:!0,parentElemId:"flp-video-controls"},{elemName:"div",attr:{id:"flp-seekbar-container",class:"fl-seekbar-container"},hasParent:!0,parentElemId:"flp-cbar-bottom"},{elemName:"div",attr:{id:"flp-timebar",class:"fl-player__timebar"},hasParent:!0,parentElemId:"flp-seekbar-container"},{elemName:"div",attr:{id:"flp-timer-active",class:"fl-player__timebar__active"},hasParent:!0,parentElemId:"flp-timebar"},{elemName:"div",attr:{id:"flp-timer-duration",class:"fl-player__timebar__duration"},hasParent:!0,parentElemId:"flp-timebar"},{elemName:"div",attr:{id:"flp-scrubber",class:"fl-player__scrubber"},hasParent:!0,parentElemId:"flp-seekbar-container"},{elemName:"div",attr:{id:"flp-scrubber-timeline",class:"fl-player__scrubber__timeline"},hasParent:!0,parentElemId:"flp-scrubber"},{elemName:"div",attr:{id:"flp-scrubber-head",class:"fl-player__scrubber__playhead"},hasParent:!0,parentElemId:"flp-scrubber"},{elemName:"div",attr:{id:"flp-controlbar",class:"fl-player-controlbar"},hasParent:!0,parentElemId:"flp-cbar-bottom"},{elemName:"button",attr:{"aria-label":"fastrewind","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--fastrewind",id:"flp-fastRewind",title:"fast_rewind"},hasParent:!0,parentElemId:"flp-controlbar"},{elemName:"button",attr:{"aria-label":"rewind","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--rewind",id:"flp-rewind",title:"rewind"},hasParent:!0,parentElemId:"flp-controlbar"},{elemName:"button",attr:{"aria-label":"playPause","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--play",id:"flp-playPause",title:"playPause"},hasParent:!0,parentElemId:"flp-controlbar"},{elemName:"button",attr:{"aria-label":"forward","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--forward",id:"flp-forward",title:"forward"},hasParent:!0,parentElemId:"flp-controlbar"},{elemName:"button",attr:{"aria-label":"fastForward","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--fastforward",id:"flp-fastForward",title:"fastforward"},hasParent:!0,parentElemId:"flp-controlbar"},{elemName:"div",attr:{id:"flp-cbar-top",class:"fl-cbar-top"},hasParent:!0,parentElemId:"flp-video-controls"},{elemName:"div",attr:{id:"flp-av-controls",class:"fl-player-av-controls"},hasParent:!0,parentElemId:"flp-cbar-top"},{elemName:"button",attr:{"aria-label":"tracks","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--tracks",id:"flp-tracks",title:"av tracks"},hasParent:!0,parentElemId:"flp-av-controls"},{elemName:"button",attr:{"aria-label":"settings","aria-pressed":"false",class:"fl-icon__btn fl-icon__btn--settings",id:"flp-settings",title:"settings"},hasParent:!0,parentElemId:"flp-av-controls"}],s=[{elemName:"div",attr:{id:"flp-seeker-container",class:"fl-seeker-container fl-seeker-container--hide"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"div",attr:{id:"flp-thumbsprite"},hasParent:!0,parentElemId:"flp-seeker-container"},{elemName:"div",attr:{id:"flp-seeker-rewind-icon",class:"fl-seeker-container__seekIcon fl-seeker-container__seekIcon--rewind"},hasParent:!0,parentElemId:"flp-seeker-container"},{elemName:"div",attr:{id:"flp-seeker-forward-icon",class:"fl-seeker-container__seekIcon fl-seeker-container__seekIcon--forward"},hasParent:!0,parentElemId:"flp-seeker-container"},{elemName:"label",attr:{id:"flp-seek-rate",class:"fl-seeker-container__seekRate"},hasParent:!0,parentElemId:"flp-seeker-container"}],o=[{elemName:"div",attr:{id:"flp-sidebar",class:"fl-sidebar"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"div",attr:{id:"flp-sidebar-tracks",class:"fl-sidebar-tracks fl-sidebar-tracks--hide"},hasParent:!0,parentElemId:"flp-sidebar"},{elemName:"div",attr:{id:"flp-sidebar-settings",class:"fl-sidebar-settings fl-sidebar-settings--hide"},hasParent:!0,parentElemId:"flp-sidebar"}],l=[{elemName:"div",attr:{id:"flp-spinner",class:"fl-spinner fl-spinner--hide"},hasParent:!0,parentElemId:"videoContainer"}],d=[{elemName:"div",attr:{id:"flp-title-container",class:"fl-player-title fl-player-title--show"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"span",attr:{id:"flp-primary-title",class:"fl-player-title__primary"},hasParent:!0,parentElemId:"flp-title-container"},{elemName:"span",attr:{id:"flp-secondary-title",class:"fl-player-title__secondary"},hasParent:!0,parentElemId:"flp-title-container"}],c=[{elemName:"div",attr:{id:"flp-captions",class:"fl-player-captions fl-player-captions--hide"},hasParent:!0,parentElemId:"videoContainer"}],h=[{elemName:"div",attr:{id:"fl-modal-wrapper",class:"fl-modal-wrapper fl-modal-wrapper--hide"},hasParent:!0,parentElemId:"videoContainer"},{elemName:"div",attr:{id:"fl-modal-content",class:"fl-modal-wrapper__content"},hasParent:!0,parentElemId:"fl-modal-wrapper"},{elemName:"p",attr:{id:"flp-modal-msg"},hasParent:!0,parentElemId:"fl-modal-content"},{elemName:"button",attr:{id:"flp-modal-button",class:"fl-modal-wrapper__btn"},hasParent:!0,parentElemId:"fl-modal-content"}],p={flpVideoElement:"flp-video-container",flpPlayerCover:"flp-player-cover",flpSpinner:"flp-spinner",flpTitleContainer:"flp-title-container",flpPrimaryTitle:"flp-primary-title",flpSecondaryTitle:"flp-secondary-title",flpCaptions:"flp-captions",flpSeekerContainer:"flp-seeker-container",flpThumbSprite:"flp-thumbsprite",flpRewindIcon:"flp-seeker-rewind-icon",flpForwardIcon:"flp-seeker-forward-icon",flpSeekRate:"flp-seek-rate",flpControlsContainer:"flp-video-controls",flpCbarBottom:"flp-cbar-bottom",flpCbarTop:"flp-cbar-top",flpTimerActive:"flp-timer-active",flpTimerDuration:"flp-timer-duration",flpScrubber:"flp-scrubber",flpScrubberTimeline:"flp-scrubber-timeline",flpScrubberHead:"flp-scrubber-head",flpUpNxt:"flp-upnxt-btn",flpUpNxtTxt:"flp-upnxt-text",flpControlbar:"flp-controlbar",flpFastRewind:"flp-fastRewind",flpRewind:"flp-rewind",flpPlayPause:"flp-playPause",flpForward:"flp-forward",flpFastForward:"flp-fastForward",flpTracks:"flp-tracks",flpSettings:"flp-settings",flpSidebar:"flp-sidebar",flpSidebarTracks:"flp-sidebar-tracks",flpSidebarSettings:"flp-sidebar-settings",flpListTextTracks:"flp-list-text-tracks",flpListAudioTracks:"flp-list-audio-tracks",flpListSettings:"flp-list-settings",flpModalWrapper:"flp-modal-wrapper",flpModalContent:"flp-modal-content",flpModalMsg:"flp-modal-msg",flpModalBtn:"flp-modal-btn"};let u={};const m=()=>(()=>{for(const[e,t]of Object.entries(p))u[e]=document.getElementById(t);return u})(),f=()=>{u={}};class v{constructor(e,t,a){this.SEEK_INCREMENT_RATE=2,this.SEEKING_RATE_INT=1e3,this.THRESHHOLD_GAP=3e3,this.INITIAL_SEEKRATE=1,this.MAX_SEEK_RATE=128,this.toBeSeekPoint=0,this.showHour=!1,this.fsStates={FS_INIT:0,FS_EXPONENTIAL_SEEK:1,FS_FINAL_UPDATE_STARTED:2,FS_FINAL_UPDATE_COMPLETE:4,FS_RESET:5},this.fsState=0,this.debounce=(e,t)=>{let a;return function(...i){clearTimeout(a),a=setTimeout((()=>e.apply(this,i)),t)}},this.fastSeekInterval=(e,t)=>{let a;return function(...i){clearInterval(a),a=setTimeout((()=>e.apply(this,i)),t)}},this.initFastSeekMode=e=>{this.playbackControls.currentSeekPoint=this.player_.currentTime,this.playbackControls.currentSeekMode=e,this.updateSeekRate(),this.updateToBeSeekPoint()},this.contFastSeekStart=()=>{this.updateFastSeekValues()},this.updateSeekRate=()=>{const e=this.SEEK_INCREMENT_RATE*this.playbackControls.currentSeekRate;this.playbackControls.currentSeekMode===this.playbackControls.currentSeekDir?(this.playbackControls.currentSeekRate=e<=this.MAX_SEEK_RATE?e:this.MAX_SEEK_RATE,this.updateToBeSeekPoint()):this.processSeekRate()},this.processSeekRate=()=>{const e=Math.floor(this.playbackControls.currentSeekRate/2);1===e?this.resumePlayer():this.playbackControls.currentSeekRate=e},this.resumePlayer=()=>{this.playbackControls.currentSeekPoint=this.toBeSeekPoint,this.player_.seek(this.toBeSeekPoint),this.updateSeekUI(),this.updateFinalControlsForQuickPress(),this.resetFastModeValues(),this.playbackControls.FFFREnabled=!1,clearInterval(this.fastInt),this.player_.play(),this.uiControls_.flpPlayPause.classList.remove("fl-icon__btn--play"),this.uiControls_.flpPlayPause.classList.add("fl-icon__btn--pause")},this.updateToBeSeekPoint=()=>{"forward"===this.playbackControls.currentSeekMode?(this.toBeSeekPoint=this.playbackControls.currentSeekPoint+Math.abs(this.playbackControls.currentSeekRate/2),this.toBeSeekPoint>=this.player_.duration&&(this.toBeSeekPoint=this.player_.duration)):"rewind"===this.playbackControls.currentSeekMode&&(this.toBeSeekPoint=this.playbackControls.currentSeekPoint-Math.abs(this.playbackControls.currentSeekRate/2),-1===Math.sign(this.toBeSeekPoint)&&(this.toBeSeekPoint=0)),this.playbackControls.tobeSeekPoint=this.toBeSeekPoint,this.player_.isLive,this.updateSeekUI()},this.updateFastSeekValues=()=>{this.playbackControls.currentSeekPoint=this.toBeSeekPoint,this.updateToBeSeekPoint()},this.updateSeekUI=()=>{this.uiControls_.flpSeekerContainer.classList.remove("fl-seeker-container--hide"),this.uiControls_.flpSeekerContainer.classList.add("fl-seeker-container--show"),this.uiControls_.flpSeekRate.style.display="flex","forward"===this.playbackControls.currentSeekMode?(this.uiControls_.flpRewindIcon.style.display="none",this.uiControls_.flpForwardIcon.style.display="flex"):"rewind"===this.playbackControls.currentSeekMode&&(this.uiControls_.flpRewindIcon.style.display="flex",this.uiControls_.flpForwardIcon.style.display="none"),this.player_.seek(this.toBeSeekPoint);const e=this.playbackControls.buildTimeString(this.toBeSeekPoint,this.showHour);this.player_.isLive?(this.uiControls_.flpTimerDuration.innerHTML=e,this.uiControls_.flpTimerActive.innerHTML="LIVE"):this.uiControls_.flpTimerActive.innerHTML=e,this.uiControls_.flpSeekRate.innerText=this.playbackControls.currentSeekRate+"X",this.playbackControls.updateSeekbar(this.player_,this)},this.setState=e=>{this.fsState=e},this.resetFastModeValues=()=>{this.uiControls_.flpSeekerContainer.classList.remove("fl-seeker-container--show"),this.uiControls_.flpSeekerContainer.classList.add("fl-seeker-container--hide"),this.uiControls_.flpRewindIcon.style.display="none",this.uiControls_.flpRewindIcon.style.display="none",this.playbackControls.currentSeekRate=this.INITIAL_SEEKRATE,this.setState(this.fsStates.FS_INIT)},this.updateFinalControlsForQuickPress=()=>{this.player_.seek(this.toBeSeekPoint),this.player_.seek(this.playbackControls.toBeSeekPoint),this.playbackControls.updateTime(this.player_),this.playbackControls.updateSeekbar(this.player_,this)},this.handleFastSeek=e=>{switch(this.fsState){case this.fsStates.FS_INIT:this.playbackControls.currentSeekDir=e,this.initFastSeekMode(e),this.debounceInit(),this.playbackControls.currentSeekPoint=this.player_.currentTime,this.playbackControls.FFFREnabled=!0,this.fastInt=setInterval(this.contFastSeekStart,this.SEEKING_RATE_INT),this.setState(this.fsStates.FS_EXPONENTIAL_SEEK),this.player_.pause(),this.uiControls_.flpPlayPause.classList.remove("fl-icon__btn--pause"),this.uiControls_.flpPlayPause.classList.add("fl-icon__btn--play");break;case this.fsStates.FS_EXPONENTIAL_SEEK:this.playbackControls.currentSeekDir=e,this.debounceInit(),this.updateSeekRate(),this.playbackControls.FFFREnabled=!0}},this.handleProgressUpdate=()=>{switch(this.fsState){case this.fsStates.FS_RESET:this.playbackControls.updateTime(this.player_),this.playbackControls.updateSeekbar(this.player_,this);break;case this.fsStates.FS_FINAL_UPDATE_STARTED:this.setState(this.fsStates.FS_FINAL_UPDATE_COMPLETE)}},this.debounceInit=this.debounce(this.updateFinalControlsForQuickPress,this.THRESHHOLD_GAP),this.isFSReset=()=>this.fsState===this.fsStates.FS_RESET,this.playbackControls=t,this.uiControls_=m(),this.player_=e,this.MAX_SEEK_RATE=a.fastSeekMaxSpeed||128,this.SEEK_INCREMENT_RATE=a.seekIncrementRate||2,this.setState(this.fsStates.FS_INIT)}}const N={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"аҧсуа бызшәа"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"አማርኛ"},an:{name:"Aragonese",nativeName:"aragonés"},ar:{name:"Arabic",nativeName:"اللغة العربية"},as:{name:"Assamese",nativeName:"অসমীয়া"},av:{name:"Avaric",nativeName:"авар мацӀ"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azərbaycan dili"},ba:{name:"Bashkir",nativeName:"башҡорт теле"},be:{name:"Belarusian",nativeName:"беларуская мова"},bg:{name:"Bulgarian",nativeName:"български език"},bh:{name:"Bihari",nativeName:"भोजपुरी"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"বাংলা"},bo:{name:"Tibetan",nativeName:"བོད་ཡིག"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Català"},ce:{name:"Chechen",nativeName:"нохчийн мотт"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ"},cs:{name:"Czech",nativeName:"čeština"},cu:{name:"Old Church Slavonic",nativeName:"ѩзыкъ словѣньскъ"},cv:{name:"Chuvash",nativeName:"чӑваш чӗлхи"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"Dhivehi"},dz:{name:"Dzongkha",nativeName:"རྫོང་ཁ"},ee:{name:"Ewe",nativeName:"Eʋegbe"},el:{name:"Greek",nativeName:"Ελληνικά"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Español"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"فارسی"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"Vakaviti"},fo:{name:"Faroese",nativeName:"føroyskt"},fr:{name:"French",nativeName:"Français"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"Gàidhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaraní",nativeName:"Avañe'ẽ"},gu:{name:"Gujarati",nativeName:"ગુજરાતી"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"هَوُسَ"},he:{name:"Hebrew",nativeName:"עברית"},hi:{name:"Hindi",nativeName:"हिन्दी"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Kreyòl ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"Հայերեն"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"Asụsụ Igbo"},ii:{name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"Iñupiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"Íslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ"},ja:{name:"Japanese",nativeName:"日本語"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"ქართული"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"Gĩkũyũ"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"қазақ тілі"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"ខេមរភាសា"},kn:{name:"Kannada",nativeName:"ಕನ್ನಡ"},ko:{name:"Korean",nativeName:"한국어"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"कश्मीरी"},ku:{name:"Kurdish",nativeName:"Kurdî"},kv:{name:"Komi",nativeName:"коми кыв"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"Кыргызча"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"Lëtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingála"},lo:{name:"Lao",nativeName:"ພາສາ"},lt:{name:"Lithuanian",nativeName:"lietuvių kalba"},lu:{name:"Luba-Katanga",nativeName:"Tshiluba"},lv:{name:"Latvian",nativeName:"latviešu valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M̧ajeļ"},mi:{name:"Māori",nativeName:"te reo Māori"},mk:{name:"Macedonian",nativeName:"македонски јазик"},ml:{name:"Malayalam",nativeName:"മലയാളം"},mn:{name:"Mongolian",nativeName:"Монгол хэл"},mr:{name:"Marathi",nativeName:"मराठी"},ms:{name:"Malay",nativeName:"Bahasa Malaysia"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"ဗမာစာ"},na:{name:"Nauru",nativeName:"Ekakairũ Naoero"},nb:{name:"Norwegian Bokmål",nativeName:"Norsk bokmål"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"नेपाली"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Diné bizaad"},ny:{name:"Chichewa",nativeName:"chiCheŵa"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"ଓଡ଼ିଆ"},os:{name:"Ossetian",nativeName:"ирон æвзаг"},pa:{name:"Panjabi",nativeName:"ਪੰਜਾਬੀ"},pi:{name:"Pāli",nativeName:"पाऴि"},pl:{name:"Polish",nativeName:"Polski"},ps:{name:"Pashto",nativeName:"پښتو"},pt:{name:"Portuguese",nativeName:"Português"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Română"},ru:{name:"Russian",nativeName:"Русский"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"संस्कृतम्"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"सिन्धी"},se:{name:"Northern Sami",nativeName:"Davvisámegiella"},sg:{name:"Sango",nativeName:"yângâ tî sängö"},si:{name:"Sinhala",nativeName:"සිංහල"},sk:{name:"Slovak",nativeName:"slovenčina"},sl:{name:"Slovenian",nativeName:"slovenščina"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"српски језик"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"தமிழ்"},te:{name:"Telugu",nativeName:"తెలుగు"},tg:{name:"Tajik",nativeName:"тоҷикӣ"},th:{name:"Thai",nativeName:"ไทย"},ti:{name:"Tigrinya",nativeName:"ትግርኛ"},tk:{name:"Turkmen",nativeName:"Türkmen"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Türkçe"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"татар теле"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"ئۇيغۇرچە‎"},uk:{name:"Ukrainian",nativeName:"Українська"},ur:{name:"Urdu",nativeName:"اردو"},uz:{name:"Uzbek",nativeName:"Ўзбек"},ve:{name:"Venda",nativeName:"Tshivenḓa"},vi:{name:"Vietnamese",nativeName:"Tiếng Việt"},vo:{name:"Volapük",nativeName:"Volapük"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"ייִדיש"},yo:{name:"Yoruba",nativeName:"Yorùbá"},za:{name:"Zhuang",nativeName:"Saɯ cueŋƅ"},zh:{name:"Chinese",nativeName:"中文"},zu:{name:"Zulu",nativeName:"isiZulu"}};class b{static getLanguages(e=[]){return e.map((e=>({code:e,name:b.getName(e),nativeName:b.getNativeName(e)})))}static getName(e){return b.validate(e)?N[e].name:""}static getAllNames(){return Object.values(N).map((e=>e.name))}static getNativeName(e){return b.validate(e)?N[e].nativeName:""}static getAllNativeNames(){return Object.values(N).map((e=>e.nativeName))}static getCode(e){return Object.keys(N).find((t=>{const a=N[t];return a.name.toLowerCase()===e.toLowerCase()||a.nativeName.toLowerCase()===e.toLowerCase()}))||""}static getAllCodes(){return Object.keys(N)}static validate(e){return N.hasOwnProperty(e)}}class g{constructor(e,t){this.herfAttr="javascript:void(0)",this.trackDetails_=t.tracks,this.settingDetails_=t.settings,this.uiControls_=m(),this.initTracksBar(),this.player_=e}async initTracksBar(){const t=this.trackDetails_.filter((e=>"text"===e.type)),a={type:e.TEXT,language:"NA"};t.push(a),await this.createTracksSidebar(t,"text",this);const i=this.trackDetails_.filter((e=>"audio"===e.type)),n={type:e.AUDIO,language:"NA"};i.push(n),await this.createTracksSidebar(i,"audio",this),await this.createSettingsBar()}async createTracksSidebar(e,t,a){const i=document.createElement("h3");i.innerText="text"===t?"Text Tracks":"Audio Tracks";const n="text"===t?"flp-list-text-tracks":"flp-list-audio-tracks";this.uiControls_.flpSidebarTracks.appendChild(i);const r=document.createElement("ul");return r.setAttribute("class","fl-sidebar-tracks--nav-list"),r.setAttribute("id",n),this.uiControls_.flpSidebarTracks.appendChild(r),e.forEach(((e,i)=>{const n=document.createElement("li");n.setAttribute("id",`sd_${t}_${i}`);const s=document.createElement("a"),o=document.createElement("span");o.setAttribute("id",`sd_${t}_ico_${i}`),s.setAttribute("href",this.herfAttr),s.onclick=this.sidebarTracksCb_.bind(a,t,e,i),s.innerText="NA"===e.language?"None":b.getName(e.language),n.appendChild(s),n.appendChild(o),r.appendChild(n)})),r}async createSettingsBar(){const e=document.createElement("h3");e.innerText="Settings",this.uiControls_.flpSidebarSettings.appendChild(e);const t=document.createElement("ul");t.setAttribute("class","fl-sidebar-settings--nav-list"),t.setAttribute("id","flp-list-settings");return this.settingDetails_.push({bitRate:0,title:"None"}),this.uiControls_.flpSidebarSettings.appendChild(t),this.settingDetails_.forEach(((e,a)=>{const i=document.createElement("li");i.setAttribute("id",`sd_settings_${a}`);const n=document.createElement("a"),r=document.createElement("span");n.setAttribute("href",this.herfAttr),r.setAttribute("id",`sd_settings_ico_${a}`),n.onclick=this.sidebarSettingsCb_.bind(this,e,a),n.innerText=e.title,i.appendChild(n),i.appendChild(r),t.appendChild(i)})),t}sidebarTracksCb_(e,t,a){console.log("Text Click",e),console.log("param",t),console.log("index",a);const i=`sd_${e}_ico_${a}`,n=`sd-list-${e}--active`,r=document.getElementById(i),s=document.querySelector("."+n);null!==s&&s.classList.contains(n)&&s.classList.remove(n),r.classList.add(n),this.player_.selectTrack(t)}sidebarSettingsCb_(e,t){console.log("Settings Click",e),console.log("index",t);const a=`sd_settings_ico_${t}`,i="sd-list-settings--active",n=document.getElementById(a),r=document.querySelector("."+i);null!==r&&r.classList.contains(i)&&r.classList.remove(i),n.classList.add(i),this.player_.maxBitrate=e.bitRate}}class k{constructor(e){this.uiControls_=m(),this.SINGLE_SEEK_DURATION=15,this.playBtn="fl-icon__btn--play",this.pauseBtn="fl-icon__btn--pause",this.upNxtEnabled=!1,this.hideControls=()=>{this.uiControls_.flpTitleContainer.classList.remove("fl-player-title--show"),this.uiControls_.flpTitleContainer.classList.add("fl-player-title--hide"),this.uiControls_.flpControlsContainer.classList.remove("fl-player-controls--show"),this.uiControls_.flpControlsContainer.classList.add("fl-player-controls--hide"),this.uiControls_.flpPlayerCover.style.display="none",clearTimeout(this.controlsInterval)},this.showControls=()=>{this.controlsInterval&&clearTimeout(this.controlsInterval),this.UI_TIMEOUT=1e3*this.uiConfig_.controlsTimerInSec||15e3,this.controlsInterval=setTimeout(this.hideControls,this.UI_TIMEOUT),this.uiControls_.flpTitleContainer.classList.remove("fl-player-title--hide"),this.uiControls_.flpTitleContainer.classList.add("fl-player-title--show"),this.uiControls_.flpControlsContainer.classList.remove("fl-player-controls--hide"),this.uiControls_.flpControlsContainer.classList.add("fl-player-controls--show"),this.uiControls_.flpPlayerCover.style.display="block",this.uiControls_.flpPrimaryTitle.innerText="You are Watching"},this.onTracksChanged=e=>{console.log("Tracks Changed !!",e)},this.enableTracks=(e,t)=>{const a=e.getAllTracks();new g(e,{tracks:a,settings:t})},this.togglePlayPause=(e,t)=>{"started"===e?(this.uiControls_.flpPlayPause.classList.remove(this.playBtn),this.uiControls_.flpPlayPause.classList.add(this.pauseBtn)):(this.uiControls_.flpPlayPause.classList.remove(this.pauseBtn),this.uiControls_.flpPlayPause.classList.add(this.playBtn)),this.FFFREnabled&&t.resumePlayer()},this.clickPlayPause=e=>{const t=e.playerState;return console.log("player state is "+e.playerState),"started"===t?e.pause():e.play()},this.buildTimeString=(e,t)=>{if(isNaN(e))return"00:00";const a=Math.floor(e/3600),i=Math.floor(e/60%60),n=Math.floor(e%60);let r=i+":"+(n<10?"0"+n:n);return t&&(i<10&&(r="0"+r),r=a+":"+r),r},this.updateVideoFrame=e=>{const t=e.videoHeight,a=e.videoWidth/t;window.innerWidth/window.innerHeight>a&&(e.style.width=window.innerHeight*a+"px")},this.updateSeekbar=(e,t)=>{const a=e.seekableRange().end-e.seekableRange().start;let i=0;if(this.showControls(),e.isLive){const t=a-(e.seekableRange().end-e.currentTime);i=-1!=Math.sign(t)?t/a:0}else i=t.isFSReset()?e.currentTime/e.seekableRange().end:this.currentSeekPoint/e.seekableRange().end;this.uiControls_.flpSeekerContainer.style.transform="translateX("+this.uiControls_.flpScrubber.clientWidth*i+"px) translateX(-65%)",this.uiControls_.flpScrubberTimeline.style.width=100*i+"%",this.uiControls_.flpScrubberHead.style.left=100*i+"%"},this.updateTime=(e,t)=>{let a=e.currentTime;const i=e.duration,n=e.seekableRange(),r=this.uiConfig_.upNextTimerInSec||20,s=1e3*r||2e4,o=i-r;if(e.isLive){const e=Math.floor(n.end-a);a=Math.max(0,e),this.uiControls_.flpTimerActive.innerText="LIVE"}else{const n=i>=3600,r=this.buildTimeString(a,n),l=this.buildTimeString(i,n);this.uiControls_.flpTimerActive.innerText=r,this.uiControls_.flpTimerDuration.innerText=l;const d=e.currentTime/e.seekableRange().end*100;this.uiControls_.flpScrubberTimeline.style.width=`${d}%`,this.uiControls_.flpScrubberHead.style.left=`${d}%`,a>=o&&!this.upNxtEnabled&&(this.uiControls_.flpUpNxt.classList.toggle("upnxt-btn--hide"),this.uiControls_.flpUpNxt.setAttribute("data-progress-style","fill-bottom"),this.uiControls_.flpUpNxtTxt.innerText="Next Video",this.upNxtEnabled=!1,t.initUpNxt(),this.uiControls_.flpUpNxt.classList.add("active"),setTimeout((()=>{this.uiControls_.flpUpNxt.classList.remove("active"),this.uiControls_.flpUpNxt.classList.toggle("upnxt-btn--hide"),this.upNxtEnabled=!1}),s))}},this.play=e=>{console.log("play()"),e.play(),this.uiControls_.flpPlayPause.classList.remove(this.playBtn),this.uiControls_.flpPlayPause.classList.add(this.pauseBtn)},this.pause=e=>{console.log("pause()"),e.pause(),this.uiControls_.flpPlayPause.classList.remove(this.pauseBtn),this.uiControls_.flpPlayPause.classList.add(this.playBtn)},this.stop=e=>{e.stop()},this.forward=e=>{e.seek(e.currentTime+this.SINGLE_SEEK_DURATION)},this.rewind=e=>{e.seek(e.currentTime-this.SINGLE_SEEK_DURATION)},this.resume=e=>{e.seek(0)},this.toggleBuffering=e=>{"active"===e?(this.uiControls_.flpSpinner.classList.remove("fl-spinner--hide"),this.uiControls_.flpSpinner.classList.add("fl-spinner--show")):(this.uiControls_.flpSpinner.classList.remove("fl-spinner--show"),this.uiControls_.flpSpinner.classList.add("fl-spinner--hide"))},this.seekThumbnail=(e,t,a)=>{if(!e.isLive){const i=e.getThumbnail(t);a||setTimeout((()=>{this.uiControls_.flpThumbSprite.style.visibility="hidden"}),1e4);const n=192,r=108;i&&this.updateThumbnailStyle({visibility:"visible",bottom:"35px",left:"0px","background-position":`${i.thumbnailRowIndex*n}px ${i.thumbnailColumnIndex*r}px`,"background-image":`url( "${i.spriteUrl}" )`,width:`${n}px`,height:`${r}px`,position:"absolute","background-size":`${i.totalRows*n}px ${i.totalColumns*r}px`,"background-color":"#000",border:"2px solid rgb(57, 57, 57)","border-radius":"8px 8px 0 0 "})}},this.updateThumbnailStyle=e=>{Object.keys(e).forEach((t=>{const a=e[t];this.uiControls_.flpThumbSprite.style.setProperty(t,a)}))},this.resetPlayerControls=()=>{this.uiControls_.flpTimerActive.innerHTML="00:00",this.uiControls_.flpTimerDuration.innerHTML="00:00",this.showControls(),this.uiControls_.flpScrubberTimeline.style.width="0",this.uiControls_.flpScrubberHead.style.left="0"},this.handleClick=(e,t,a)=>{switch(t){case"fastRewind":a.handleFastSeek("rewind");break;case"rewind":this.rewind(e);break;case"playPause":"started"===e.playerState?this.pause(e):this.play(e);break;case"forward":this.forward(e);break;case"fastForward":a.handleFastSeek("forward");break;case"resume":this.resume(e)}},this.UI_TIMEOUT=15e3,this.controls_={currentSeekRate_:1,currentSeekPoint_:0,currentSeekMode_:"forward",fffrEnabled_:!1,toBeSeekPoint_:0,currentSeekDirection_:"forward"},this.uiConfig_=e,this.SINGLE_SEEK_DURATION=e.singleSeekDuration||15}set currentSeekRate(e){this.controls_.currentSeekRate_=e}get currentSeekRate(){return this.controls_.currentSeekRate_}set currentSeekDir(e){this.controls_.currentSeekDirection_=e}get currentSeekDir(){return this.controls_.currentSeekDirection_}set currentSeekPoint(e){this.controls_.currentSeekPoint_=e}get currentSeekPoint(){return this.controls_.currentSeekPoint_}set toBeSeekPoint(e){this.controls_.toBeSeekPoint_=e}get toBeSeekPoint(){return this.controls_.toBeSeekPoint_}set currentSeekMode(e){this.controls_.currentSeekMode_=e}get currentSeekMode(){return this.controls_.currentSeekMode_}set FFFREnabled(e){this.controls_.fffrEnabled_=e}get FFFREnabled(){return this.controls_.fffrEnabled_}}function y(e,t,i,n,r,s){const o=s.id,l="flp-video-controls",d="flp-cbar-bottom",c="flp-cbar-top",h="flp-controlbar",p="flp-av-controls",u=[10182,66,196,10009],m=a(),f="flp-sidebar",v="flp-sidebar-tracks",N="flp-sidebar-settings",b="fl-sidebar--open",g="flp-playPause",k="flp-fastForward",y="flp-tracks",C="flp-settings",S="flp-upnxt-btn",_="fl-sidebar-settings--hide",E="fl-sidebar-tracks--hide",I="flp-list-settings",T="flp-list-text-tracks";let P=!1;const F="fl-icon__btn--focus",w="list-focus",x=()=>{e.assignFocus(g);document.getElementById("flp-playPause").classList.add(F)},L=t=>{P=!1,t===I?(r.flpSidebarSettings.classList.toggle(_),r.flpSidebar.classList.toggle(b),e.setNodeFocusable(I,!1),e.assignFocus("flp-settings")):t===v&&(r.flpSidebarTracks.classList.toggle(E),r.flpSidebar.classList.toggle(b),e.setNodeFocusable(T,!1),e.assignFocus("flp-tracks"))},A=()=>{m.log("Selected Audio"),L(v)},R=()=>{m.log("Selected Text"),L(v)},D=()=>{m.log("Selected Settings"),L(I)},O={initUpNxt(){e.setNodeFocusable(S,!0),e.assignFocus(S)},initAudio(t){const a=t.filter((e=>"audio"===e.type));a.length>0&&a.forEach(((t,a)=>{m.log(t);const i="sd_audio_"+a;e.registerNode(i,{parent:v,orientation:"vertical",index:a,isFocusable:!0,onSelect:A})}))},initText(t){const a=t.filter((e=>"text"===e.type));a.length>0&&a.forEach(((t,a)=>{m.log(t);const i="sd_text_"+a;e.registerNode(i,{parent:T,orientation:"vertical",isFocusable:!0,index:a,onSelect:R})}))},initSettings(t){t.length>0&&(m.log("nav",e),t.forEach(((t,a)=>{m.log("settings",t);const i="sd_settings_"+a;e.registerNode(i,{parent:I,orientation:"vertical",isFocusable:!0,index:a,onSelect:D})})))}};return e.registerNode(o,{orientation:"horizontal",isIndexAlign:!0}).registerNode(l,{parent:o,orientation:"horizontal"}).registerNode(d,{parent:l,orientation:"horizontal"}).registerNode(h,{parent:d,orientation:"horizontal"}).registerNode("flp-fastRewind",{parent:h,isFocusable:!0,onSelect:()=>{i.handleClick(t,"fastRewind",n)},index:1}).registerNode("flp-rewind",{parent:h,isFocusable:!0,onSelect:()=>{i.handleClick(t,"rewind",n)},index:2}).registerNode(g,{parent:h,isFocusable:!0,onSelect:()=>{i.FFFREnabled&&n.resumePlayer(),i.handleClick(t,"playPause",n)},index:3}).registerNode("flp-forward",{parent:h,isFocusable:!0,onSelect:()=>{i.handleClick(t,"forward",n)},index:4}).registerNode(k,{parent:h,isFocusable:!0,onSelect:()=>{i.handleClick(t,"fastForward",n)},index:5}).registerNode(S,{parent:d,orientation:"horizontal",index:1}).registerNode(c,{parent:l,orientation:"horizontal"}).registerNode(p,{parent:c,orientation:"horizontal"}).registerNode(y,{parent:p,isFocusable:!0,onSelect:()=>{r.flpSidebarTracks.classList.toggle(E),r.flpSidebar.classList.toggle(b),e.setNodeFocusable(T,!0),e.assignFocus("sd_text_0");document.getElementById("sd_text_0").classList.add(w),P=!0},index:1}).registerNode(C,{parent:p,isFocusable:!0,onSelect:()=>{r.flpSidebarSettings.classList.toggle(_),r.flpSidebar.classList.toggle(b);document.getElementById("sd_settings_0").classList.add(w),e.assignFocus("sd_settings_0"),P=!0,m.log("Sidebar Status",P)},index:2}).registerNode(f,{parent:o,orientation:"horizontal"}).registerNode(v,{parent:f,orientation:"vertical"}).registerNode(T,{parent:v,orientation:"vertical"}).registerNode(N,{parent:f,orientation:"horizontal"}).registerNode(I,{parent:N,orientation:"vertical"}),e.registerNode("errorPopup",{parent:o}).registerNode("okButton",{parent:"errorPopup",onSelect:x}),document.onkeydown=t=>{i.showControls(),t.stopPropagation();const a=e.getCurrentFocusNode();m.log("Current Naviation id",e.getCurrentFocusNode().id);const n=a.parent;m.log("Current Elemet Parent",n);const s=n===N||n===v,o=n===h||n===p,l="ArrowDown"===t.key||"ArrowUp"===t.key,d="ArrowRight"===t.key||"ArrowLeft"===t.key;var c,f;if(s&&d?(t.preventDefault(),t.stopPropagation()):s&&l?e.handleKeyEvent(t):o&&l?(c=a,f=t.key,c.parent===h&&"ArrowUp"===f?e.assignFocus(y):c.parent===p&&"ArrowDown"===f&&(c.id===C||c.id===y)&&e.assignFocus(k),e.handleKeyEvent(t)):e.handleKeyEvent(t),u.includes(t.keyCode)){r.flpVideoWrapper.classList.remove("fl-overlay--show"),r.flpVideoWrapper.classList.add("fl-overlay--hide");document.getElementById("tabContainer").style.display="none"}},x(),e.on("move",(e=>{e.enter.id&&m.log("Enter into the element",e.enter.id),e.leave.id&&m.log("Leaving from the element",e.leave.id)})),e.on("focus",(e=>{if(m.log("Focused",e),P){const e=w,t=document.querySelector("."+e);null!==t&&t.classList.contains(e)&&t.classList.remove(e)}else{const t=document.querySelector(".fl-icon__btn--focus");null!==t&&t.classList.contains(F)&&t.classList.remove(F);const a=document.getElementById(e.id);S!==e.id&&a.classList.add(F)}})),O}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var C,S,_=function(){return _=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},_.apply(this,arguments)};!function(e){e.LEFT="left",e.RIGHT="right",e.UP="up",e.DOWN="down",e.ENTER="enter",e.UNSPECIFIED="*"}(C||(C={})),function(e){e.VERTICAL="vertical",e.HORIZONTAL="horizontal"}(S||(S={}));var E={4:C.LEFT,21:C.LEFT,37:C.LEFT,214:C.LEFT,205:C.LEFT,218:C.LEFT,5:C.RIGHT,22:C.RIGHT,39:C.RIGHT,213:C.RIGHT,206:C.RIGHT,217:C.RIGHT,29460:C.UP,19:C.UP,38:C.UP,211:C.UP,203:C.UP,215:C.UP,29461:C.DOWN,20:C.DOWN,40:C.DOWN,212:C.DOWN,204:C.DOWN,216:C.DOWN,29443:C.ENTER,13:C.ENTER,67:C.ENTER,32:C.ENTER,23:C.ENTER,195:C.ENTER},I=function(e){return!!e&&(null!=e.isFocusable?e.isFocusable:!!e.selectAction)},T=function(e,t){if(e&&e.children)for(var a=0,i=Object.keys(e.children);a<i.length;a++){var n=i[a],r=e.children[n];if(r.index===t)return r}},P=function(e,t,a){if(e&&e.children){var i=e.children[e.activeChild];if(a&&i&&i.index>=a[0]&&i.index<=a[1]&&I(i))return i;var n,r=Object.keys(e.children).filter((function(t){return I(e.children[t])||e.children[t].children})).map((function(t){return e.children[t].index}));if(!(r.length<=0))return T(e,(n=t,r.reduce((function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e}))))}},F=function(e,t){if(e&&t){var a=Object.keys(e.children||{}),i={};t.parent=e.id,("number"!=typeof t.index||t.index>a.length)&&(t.index=a.length);for(var n=0,r=a;n<r.length;n++){var s=r[n],o=e.children[s];o.index>=t.index&&(i[t.id]||(i[t.id]=t),o.index+=1),i[o.id]=o}i[t.id]||(i[t.id]=t),e.children=i}},w=function(e,t){if(t&&e&&e.children&&e.children[t]){var a=e.children[t].index;delete e.children[t];for(var i=0,n=Object.keys(e.children);i<n.length;i++){var r=n[i],s=e.children[r];s.index>a&&(s.index-=1)}}},x=function(e){var t={};if(!e)return t;var a=function(e,i){Object.keys(e).forEach((function(n){t[n]=_(_({},e[n]),{id:n,parent:e[n].parent||i,children:void 0}),e[n].children&&a(e[n].children,n)}))};return a(e),t},L=function(e){if(e)for(var t=0,a=Object.keys(S);t<a.length;t++){var i=a[t];if(S[i]===e.toLowerCase())return S[i]}},A=function(e){if(e)for(var t=0,a=Object.keys(C);t<a.length;t++){var i=a[t];if(C[i]===e.toLowerCase())return C[i]}};function R(e){return e=e||Object.create(null),{on:function(t,a){(e[t]||(e[t]=[])).push(a)},off:function(t,a){e[t]&&e[t].splice(e[t].indexOf(a)>>>0,1)},emit:function(t,a){(e[t]||[]).slice().map((function(e){e(a)})),(e["*"]||[]).slice().map((function(e){e(t,a)}))}}}var D=function(){function e(){this.nodes={},this.rootNodeId=void 0,this.currentFocusNodeId=void 0,this.isIndexAlignMode=!1,this.emitter=R(),this.overrides={}}return e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.getRootNode=function(){var e=this.getNode(this.rootNodeId);if(!e)throw new Error("no root node");return e},e.prototype.getCurrentFocusNode=function(){return this.getNode(this.currentFocusNodeId)},e.prototype.registerNode=function(e,t){if(void 0===t&&(t={}),this.getNode(e))throw Error("Node with an ID of "+e+" has already been registered");if(delete(t=_(_({},t),{id:e})).children,Object.keys(this.nodes).length<=0)return this.rootNodeId=e,this.nodes[e]=t,this;t.parent||e===this.rootNodeId||(t.parent=this.rootNodeId);var a=this.getNode(t.parent);return a?(this.nodes[e]=t,F(a,t),this):this},e.prototype.moveNode=function(e,t,a){if(void 0===a&&(a={maintainIndex:!1}),e!==this.rootNodeId){var i=this.getNode(e);if(i){var n=this.getNode(t);if(n&&i.parent!==t){var r=this.getNode(i.parent);w(r,e),"number"==typeof a.index?i.index=a.index:a.maintainIndex||(i.index=void 0),F(n,i),this.unsetActiveChild(r.id,i.id),this.isSameOrParentForChild(e,this.currentFocusNodeId)&&this.setActiveChildRecursive(n.id,i.id)}}}},e.prototype.register=function(e,t){return this.registerNode(e,t)},e.prototype.unregister=function(e,t){this.unregisterNode(e,t)},e.prototype.unregisterNode=function(e,t){var a=this;if(void 0===t&&(t={forceRefocus:!0}),e===this.rootNodeId)return this.nodes={},this.rootNodeId=void 0,this.currentFocusNodeId=void 0,this.isIndexAlignMode=!1,this.emitter=R(),this.overrides={},this;var i=this.getNode(e);if(!i)return this;var n=this.getNode(i.parent);w(n,e);var r=function(e){var t;return e?x(((t={})[e.id]=e,t)):{}}(i);return Object.keys(r).forEach((function(e){delete a.nodes[e]})),n.activeChild&&n.activeChild===e&&(this.isIndexAlignMode=!1,this.getCurrentFocusNode()||(this.currentFocusNodeId=void 0,t.forceRefocus&&this.recalculateFocus(n)),this.unsetActiveChild(n.id,e)),this.emitter.emit("blur",i),i.onBlur&&i.onBlur(i),Object.keys(this.overrides).forEach((function(e){var t=a.overrides[e];(r[t.target]||r[t.id])&&a.unregisterOverride(e)})),this},e.prototype.registerOverride=function(e,t){if(!e)throw new Error("need an ID to register an override");if(this.overrides[e])throw new Error("override with ID of "+e+" already exists");if(!t.id)throw new Error("registering override: "+e+" - missing internal id");if(!t.direction)throw new Error("registering override: "+e+" - missing internal direction");if(!t.target)throw new Error("registering override: "+e+" - missing internal target");return this.overrides[e]=t,this},e.prototype.unregisterOverride=function(e){return delete this.overrides[e],this},e.prototype.getNode=function(e){if(e)return this.nodes[e]},e.prototype.pickNode=function(e){var t=this.getNode(e);if(t)return this.unregisterNode(e),t},e.prototype.climbUp=function(e,t){if(e){for(var a=0,i=Object.keys(this.overrides);a<i.length;a++){var n=i[a],r=this.overrides[n];if(r.id===e.id&&r.direction.toUpperCase()===t.toUpperCase())return this.getNode(r.target)}return e.id===this.currentFocusNodeId?this.climbUp(this.getNode(e.parent),t):function(e,t){if(!e||!t)return!1;var a=L(e),i=A(t);return i===C.UNSPECIFIED||a===S.VERTICAL&&(i===C.UP||i===C.DOWN)||a===S.HORIZONTAL&&(i===C.LEFT||i===C.RIGHT)}(e.orientation,t)&&this.getNextFocusableChildInDirection(e,t)?e:this.climbUp(this.getNode(e.parent),t)}},e.prototype.digDown=function(e,t){if(void 0===t&&(t=C.UNSPECIFIED),e){if(I(e)&&(e.isStopPropagate||!this.doesNodeHaveFocusableChildren(e)))return e;if(this.isIndexAlignMode){var a=this.getCurrentFocusNode(),i=a.indexRange,n=i?i[0]:a.index;if(e.isIndexAlign){var r=this.getNode(e.parent);if(r.orientation===S.VERTICAL){if(t===C.UP)return this.digDown(P(this.getNodeLastChild(e),n,i),t);if(t===C.DOWN)return this.digDown(P(this.getNodeFirstChild(e),n,i),t)}if(r.orientation===S.HORIZONTAL){if(t===C.LEFT){var s=P(e,this.getNode(a.parent).index);return this.digDown(this.getNodeLastChild(s),t)}if(t===C.RIGHT){s=P(e,this.getNode(a.parent).index);return this.digDown(this.getNodeFirstChild(s),t)}}}var o=function(e,t){if(e&&e.children)for(var a=0,i=Object.keys(e.children);a<i.length;a++){var n=i[a],r=e.children[n];if(r.indexRange&&r.indexRange[0]<=t&&r.indexRange[1]>=t)return r}}(e,n);return o?this.digDown(o,t):this.digDown(P(e,n,i),t)}return e.activeChild?this.digDown(e.children[e.activeChild],t):this.digDown(this.getNextFocusableChildInDirection(e,C.UNSPECIFIED),t)}},e.prototype.getNextFocusableChildInDirection=function(e,t){if(e){var a,i=L(e.orientation),n=A(t);(n===C.UNSPECIFIED||i===S.HORIZONTAL&&n===C.RIGHT||i===S.VERTICAL&&n===C.DOWN)&&(a=this.getNextFocusableChild(e));var r=n===C.UNSPECIFIED||i===S.HORIZONTAL&&n===C.LEFT||i===S.VERTICAL&&n===C.UP;return!a&&r&&(a=this.getPrevFocusableChild(e)),a}},e.prototype.getNextFocusableChild=function(e){if(e&&e.children){var t=this.getNode(e.activeChild);if(!t)return this.getNodeFirstFocusableChild(e);var a=t;do{!(a=T(e,a.index+1))&&e.isWrapping&&(a=this.getNodeFirstFocusableChild(e)),a||(a=t)}while(!this.isNodeFocusableCandidate(a)&&a.id!==t.id);return a.id!==t.id?a:void 0}},e.prototype.getPrevFocusableChild=function(e){if(e&&e.children){var t=this.getNode(e.activeChild);if(!t)return this.getNodeLastFocusableChild(e);var a=t;do{!(a=T(e,a.index-1))&&e.isWrapping&&(a=this.getNodeLastFocusableChild(e)),a||(a=t)}while(!this.isNodeFocusableCandidate(a)&&a.id!==t.id);return a.id!==t.id?a:void 0}},e.prototype.getNodeFirstChild=function(e){if(e&&e.children)return T(e,0)},e.prototype.getNodeLastChild=function(e){if(e&&e.children)return T(e,Object.keys(e.children).length-1)},e.prototype.getNodeFirstFocusableChild=function(e){if(e&&e.children)for(var t=0,a=Object.keys(e.children).map((function(t){return e.children[t]})).sort((function(e,t){return e.index-t.index}));t<a.length;t++){var i=a[t];if(this.isNodeFocusableCandidate(i))return i}},e.prototype.getNodeLastFocusableChild=function(e){if(e&&e.children)for(var t=0,a=Object.keys(e.children).map((function(t){return e.children[t]})).sort((function(e,t){return t.index-e.index}));t<a.length;t++){var i=a[t];if(this.isNodeFocusableCandidate(i))return i}},e.prototype.handleKeyEvent=function(e,t){if(void 0===t&&(t={forceFocus:!1}),e){var a,i=e.keyCode?(a=e.keyCode,E[a]):A(e.direction);if(i){var n,r,s=this.getCurrentFocusNode();if(i===C.ENTER)return s&&(this.emitter.emit("select",s),s.onSelect&&s.onSelect(s)),s;if(!s&&t.forceFocus)n=this.getRootNode(),r=this.getNextFocusableChildInDirection(n,C.UNSPECIFIED);else{if(!(n=this.climbUp(s,i)))return;this.isIndexAlignMode=!0===n.isIndexAlign;var o=this.getNextFocusableChildInDirection(n,i);r=this.digDown(o||n,i)}if(r){if(s&&s.shouldCancelLeave&&s.shouldCancelLeave(s,r))return s.onLeaveCancelled&&s.onLeaveCancelled(s,r),this.emitter.emit("cancelled",{leave:s,enter:r}),s;if(r.shouldCancelEnter&&r.shouldCancelEnter(s,r))return r.onEnterCancelled&&r.onEnterCancelled(s,r),this.emitter.emit("cancelled",{leave:s,enter:r}),s;this.assignFocus(r.id);var l=i===C.LEFT||i===C.UP?-1:1;return this.emitter.emit("move",{leave:s,enter:r,direction:i,offset:l}),n.onMove&&n.onMove({node:n,leave:s,enter:r,direction:i,offset:l}),s&&s.onLeave&&s.onLeave(s),r.onEnter&&r.onEnter(r),r}}}},e.prototype.setActiveChild=function(e,t){var a=this.getNode(t),i=this.getNode(e);if(i&&a&&a.parent===i.id)if(i.activeChild&&i.activeChild!==a.id){var n=this.getNode(i.activeChild);i.activeChild=a.id,n&&(this.emitter.emit("inactive",n),n.onInactive&&n.onInactive(n)),this.emitter.emit("active",a),a.onActive&&a.onActive(a),i.onActiveChildChange&&i.onActiveChildChange({node:i,leave:n,enter:a})}else i.activeChild||(i.activeChild=a.id,this.emitter.emit("active",a),a.onActive&&a.onActive(a),i.onActiveChildChange&&i.onActiveChildChange({node:i,leave:null,enter:a}))},e.prototype.setActiveChildRecursive=function(e,t){this.setActiveChild(e,t);var a=this.getNode(e);a&&a.parent&&this.setActiveChildRecursive(a.parent,a.id)},e.prototype.unsetActiveChild=function(e,t){var a=this.getNode(e);if(a&&a.activeChild&&a.activeChild===t)for(var i=this.isSameOrParentForChild(t,this.currentFocusNodeId);a&&a.activeChild;){var n=a.activeChild===t,r=this.isSameOrParentForChild(a.activeChild,this.currentFocusNodeId);(i||n&&!r)&&delete a.activeChild,t=a.id,a=this.getNode(a.parent)}},e.prototype.assignFocus=function(e){var t=this.getNode(e);if(t&&!I(t)&&(t=this.digDown(t,C.UNSPECIFIED)),!t)throw new Error("trying to assign focus to a non focusable node");var a=this.getCurrentFocusNode();a&&(this.emitter.emit("blur",a),a.onBlur&&a.onBlur(a)),this.currentFocusNodeId=t.id,t.parent&&this.setActiveChildRecursive(t.parent,t.id),t.onFocus&&t.onFocus(t),this.emitter.emit("focus",t)},e.prototype.recalculateFocus=function(e){var t=this.climbUp(e,C.UNSPECIFIED)||this.getRootNode(),a=this.getNextFocusableChildInDirection(t,C.UNSPECIFIED),i=this.digDown(a||t,C.UNSPECIFIED);i?this.assignFocus(i.id):this.currentFocusNodeId=void 0},e.prototype.registerTree=function(e){var t=this,a=x(e);Object.keys(a).forEach((function(e){t.registerNode(e,a[e])}))},e.prototype.insertTree=function(e,t){if(void 0===t&&(t={maintainIndex:!0}),e){var a=e[Object.keys(e)[0]];a.id=Object.keys(e)[0];var i=this.pickNode(a.id);!a.parent&&i&&i.parent&&(a.parent=i.parent),t.maintainIndex&&i&&"number"==typeof i.index&&(a.index=i.index),this.registerTree(e)}},e.prototype.doesNodeHaveFocusableChildren=function(e){if(!e||!e.children)return!1;for(var t=x(e.children),a=0,i=Object.keys(t);a<i.length;a++){var n=i[a];if(I(t[n]))return!0}return!1},e.prototype.isNodeFocusableCandidate=function(e){return I(e)||this.doesNodeHaveFocusableChildren(e)},e.prototype.isSameOrParentForChild=function(e,t){if(!e||!t)return!1;if(e===t)return!0;for(var a=this.getNode(t);a;){if(a.parent===e)return!0;a=this.getNode(a.parent)}return!1},e.prototype.setNodeFocusable=function(e,t){var a=this.getNode(e);a&&(I(a)!==t&&(a.isFocusable=t,t||(this.currentFocusNodeId===e&&this.recalculateFocus(a),a.parent&&this.unsetActiveChild(a.parent,e))))},e}();function O(e,i,p,u){const N=o,b="fl-overlay--show",g="fl-overlay--hide",C=[r,d,s,l,c,h],S=new n(i);return{createPlayerUi:async()=>{await(async()=>(console.log("UI Initiailized"),C.forEach((e=>{S.flUiBuilder(e)})),S))(),await(async()=>S.flUiBuilder(N))(),function(e,i,n,r){const s=m(),o=new k(n),l=new v(e,o,n),d=m(),c=a(),h=new D;e.load();const p=y(h,e,o,l,d,r);d.flpPlayPause.focus(),e.subscribe("playbackstatechanged",(function(t){c.log("Ui Controls: ",s.flpSeekerContainer),c.log("Playback  state: ",t),c.log("playbackRate",e.playbackRate),"loaded"===t&&(o.play(e),o.showControls())})),e.subscribe("progressupdate",(function(){o.updateTime(e,p),"ad"!==t.AD&&l.handleProgressUpdate(),c.log("videoElement",i)})),e.subscribe("streamended",(function(){e.stop(),c.log("[FLPlayer] streamended"),o.FFFREnabled&&o.togglePlayPause(e.playerState,l)})),e.subscribe("bufferingstatechanged",(function(e){o.toggleBuffering(e)})),e.subscribe("playercontextchanged",(function(e){c.log("Player Context changed: ",e)})),e.subscribe("aborted",(function(){c.log("Player aborted")})),e.subscribe("contentloaded",(function(){c.log("content is loaded"),o.enableTracks(e,n.settingsInfo),d.flpSecondaryTitle.innerText=n.title,o.updateTime(e,p),p.initAudio(e.getAllTracks()),p.initSettings(n.settingsInfo),p.initText(e.getAllTracks())})),e.subscribe("trackschanged",(function(){c.log("tracks loaded"),o.onTracksChanged(e)})),e.subscribe("timedmetadata",(t=>{if(void 0!==e){d.flpCaptions.classList.toggle("fl-player-captions--hide");const e=t.data;if(!e||e.trim().length<=0)return void d.flpCaptions.classList.toggle("fl-player-captions--hide");switch(t.type){case"text":d.flpCaptions.innerHTML=e;break;case"cea-708":d.flpCaptions.innerText=atob(e)}}}))}(e,p,u,i),i.classList.contains(g)&&(i.classList.remove(g),i.classList.add("fl-overlay",b))},subscribe:e=>{const t=document.querySelector(".upnxt-btn");t.addEventListener("click",(a=>{a.stopPropagation(),console.log("Has Focus",t.classList.contains("active")),t.classList.contains("active")&&e("playNext")}),!0)},destroy:()=>{console.log("Plauyer Ui Callback"),i.classList.contains(b)&&(i.classList.remove(b),i.classList.add(g));["flp-video-controls","flp-spinner","flp-title-container","flp-captions","fl-modal-wrapper","flp-sidebar","flp-seeker-container","flp-player-cover"].forEach((e=>{document.getElementById(e).remove()})),f()}}}function B(){let e,t,a,i;return{get player(){return e},get containerElement(){return t},get videoElement(){return a},get uiConfig(){return i},contentPlayer(t){return e=t,this},contentVideoWrapper(e){return t=e,this},contentVideoElement(e){return a=e,this},playerUiConfig(e){return i=e,this},build(){return O(this.player,this.containerElement,this.videoElement,this.uiConfig)}}}const M="7.0.55";export{O as CreatePlayerHead,B as createPlayerUiBuilder,M as version};

